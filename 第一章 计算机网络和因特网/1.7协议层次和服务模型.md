7.协议层次和服务模型
    7.1协议层次
        网络是一个很复杂的系统：
            网络功能繁杂： 数字信号的物理信号承载、点到点、路由、rdt()、进程区分、应用等
            现实来看，网络的许多构成元素和设备：
                主机
                路由器
                各种媒体的链路
                应用
                协议
                硬件软件
        Q:如何组织和实现这个复杂的网络功能？    =====》 模块化====》分层 ，即特殊的模块化，不允许跨层的模块调用  
            分层的优势：
                概念化：结构清晰，便于标识网络组件，以及描述其相互关系
                    分层参考模型
                结构化：模块化更容易维护和系统升级
                    改变某一层服务的实现不影响系统中的其他层次
                    对于其他层次而言是透明的
        
            分层思想被认为有害的地方：
                效率比直接完成低


            层次化方式实现复杂的网络功能：
                将网络复杂的功能分层 功能明确的层次，每一层实现了其中一个或一组功能，功能中有其上层可以使用的功能：服务   
                    服务：功能的一部分，外人可以通过接口实现的功能的子集
                本层协议实体相互交互执行本层的协议动作，目的是实现本层功能，通过接口为上层提供更好的服务。
                    协议：本层协议实体交互的过程中应该遵守的动作集合
                在实现本层协议的时候，直接利用了下层所提供的服务
                    对等层的模块通过协议交换信息 =====》 如何交换PDU？   通过下层的服务
                本层  的服务：借助下层服务实现的本层协议实体之间交互带来的新功能（上层可以利用的）+更下层提供的服务
    7.2服务和服务访问点
        服务：
            低层实体向上层实体提供它们之间的通信的能力   （即垂直的能力）
                服务用户    service user
                服务提供者  service provider
        原语：primitive     抽象
            上层使用下层服务的形式，高层通过低层提供的服务，以及低层向高层提供服务都是通过服务访问原语来进行交互的----形式    
            服务用户采用什么样的形式来使用服务提供者提供的服务
            提供服务的形式    
        服务访问点：SAP Server Access Point         
            用户 下层服务提供者 区分 上层的服务用户 的信息称为服务访问点               类似快递单子上面的信息
            使用下层提供的服务通过层间的接口---地点:       
                例子：邮箱
                地址 address：下层的一个实体支撑着上层的多个实体，SAP有标志不同上层实体的作用
                可以有不同的实现，队列
                例子：传输层的SAP 端口Port
               
    7.3服务的类型
        面向连接的服务：   
            连接：两个通信实体为进行通信而建立的一种结合   Hi过去 Hi回来
            通信过程：建立连接，通信，拆除连接
            例子：网络层的连接被称为虚电路
            适用范围：对于大的数据块要传输，不适合小的零星报文
            特点：保序
            服务类型：
                可靠的信息流
                    传送页面（可靠的获得，通过接收方的确认）
                可靠的字节流
                    远程登陆
                不可靠的连接
                    数字化声音
        无连接的服务：   UDP
            无连接服务：两个对等层实体在通信前不需要建立一个连接，不预留资源：不需要通信双方都是活跃
                例子：寄信
            特点：不可靠，可能重复，可能失序
            IP分组，数据报
            适用范围：适合传送零星数据
            服务类型：
                不可靠的数据报
                    电子方式的信函
                有确认的数据报：
                    挂号信
                请求回答
                    信息查询

    7.4服务与协议的关系
        服务：低层实体向上层实体提供它们之间的通信能力，是通过原语来操作的，垂直
        协议：对等层实体之间在相互通信过程中，需要遵循的规则的集合，水平
        联系：  
            本层协议的实现需要靠下层提供的服务来实现
            本层实体通过协议为上层提供更高级的服务
        
    7.5数据单元 DU
        IDU:Interface Data Unit
            ICI:Interface Control Information
            SDU:Service Data Unit

               通过SAP解析成
        IDU--->SAP-------->（上层的）ICI、SDU
                            （上层的）SDU+（本层的）附加的控制信息即，Header ==== PDU
        
        上述为理想情况，更多情况为：
        IDU--->SAP------>ICI+SDU
                        SDU很大需要拆解成若干小个小的部分
                        SDU拆解后的（每个）部分+(本层的)Header ===PDU  即若干个PDU
        
        ------------->SDU很小，若干个SDU拼起来+（本层）header ====PDU 一个PDU

        header=ICI+本层附加控制信息

    7.6 Internet协议栈
        应用层: PDU 报文
            网络应用
                为人类用户或者其他应用进程提供网络应用服务
                FTP,SMTP,HTTP,DNS
        传输层：PDU 报文段
            主机之间的数据传输
                在网络层提供的端到端通信的基础上，细分为进程到进程，将不可靠的通信变成可靠的通信
                TCP,UDP
        网络层：PDU packet 分组 /  datagram 数据报        转发，路由
            在链路层的基础上，端到端传输以分组为单位的数据                  E2E
                主机主机间的通信，端到端通信，不可靠
                IP（转发）,路由协议 
        链路层：PDU frame 帧       
            在物理层的基础之上，相邻网络节点间的数据传输   （以帧为单位的数据）   P2P
                两个相邻两点的通信，点到点通信，可靠或不可靠
                点对对协议 OOO,802.11(WIFI),Ethernet
        物理层：PDU bit 位
            在物理媒体上传送bit

        一般链路层与网络层被封装在网卡中

    7.7 ISO/OSI 参考模型
        应用->表示->会话->传输->网络->链路->物理
        表示层：允许应用解释传输的数据     加密，压缩，机器相关的表示转换
        会话层：数据交换的同步，检查点，恢复

        互联网协议栈没有这两层。
            这些服务如果需要的话，就拿到应用层去做

    7.8 封装和解封装

        H:header M：Message             2层封装解封装               3层封装解封装
                 H1M                        H2H1M                    HNH2H1M
             源  封装        -----> 解封装  封装-------------->解封装 封装    ------->解封装

        应用层  报文       
        传输层  报文段
        网络层  数据报/分组        链路层转换机              路由器     .......      目的
        链路层  帧                  
        物理层  bit ------------->  物理层 ^--------------> 物理层 ^----------->   物理层
                                 |  链路层 |              | 链路层 |               链路层
                                 ------ >  |              | 网络层 |               网络层
                                                            ----->                 传输层
                                                                                   应用层
    7.9 各层次的协议数据单元 PDU
        应用层：
            报文 message
        传输层：
            报文段 segment
                TCP段，UDP段
        网络层：
            有连接：分组 packet
            无连接：数据报 datagram
        数据链路层：
            帧 frame
        物理层
            位 bit





        
                                          

            


